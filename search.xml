<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>我的博客</title>
      <link href="/2025/09/07/%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/"/>
      <url>/2025/09/07/%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="我的博客"><a href="#我的博客" class="headerlink" title="我的博客"></a>我的博客</h2>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>吐环境脚本</title>
      <link href="/2025/09/07/%E8%A1%A5%E7%8E%AF%E5%A2%83-%E5%90%90%E7%8E%AF%E5%A2%83%E8%84%9A%E6%9C%AC/"/>
      <url>/2025/09/07/%E8%A1%A5%E7%8E%AF%E5%A2%83-%E5%90%90%E7%8E%AF%E5%A2%83%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<h1 id="脚本1"><a href="#脚本1" class="headerlink" title="脚本1"></a>脚本1</h1><p>前半部分是脚本后面是补的环境</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getEnvs</span>(<span class="params">proxyObjs</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; proxyObjs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">const</span> handler = <span class="string">`&#123;</span></span><br><span class="line"><span class="string">      get: function(target, property, receiver) &#123;</span></span><br><span class="line"><span class="string">        console.log(&quot;方法:&quot;, &quot;get  &quot;, &quot;对象:&quot;, &quot;<span class="subst">$&#123;proxyObjs[i]&#125;</span>&quot;, &quot;  属性:&quot;, property, &quot;  属性类型：&quot;, typeof property, &quot;, 属性值：&quot;, target[property], &quot;, 属性值类型：&quot;, typeof target[property]);</span></span><br><span class="line"><span class="string">        return target[property];</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      set: function(target, property, value, receiver) &#123;</span></span><br><span class="line"><span class="string">        console.log(&quot;方法:&quot;, &quot;set  &quot;, &quot;对象:&quot;, &quot;<span class="subst">$&#123;proxyObjs[i]&#125;</span>&quot;, &quot;  属性:&quot;, property, &quot;  属性类型：&quot;, typeof property, &quot;, 属性值：&quot;, value, &quot;, 属性值类型：&quot;, typeof target[property]);</span></span><br><span class="line"><span class="string">        return Reflect.set(...arguments);</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;`</span>;</span><br><span class="line">        <span class="built_in">eval</span>(<span class="string">`try &#123;</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;proxyObjs[i]&#125;</span>;</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;proxyObjs[i]&#125;</span> = new Proxy(<span class="subst">$&#123;proxyObjs[i]&#125;</span>, <span class="subst">$&#123;handler&#125;</span>);</span></span><br><span class="line"><span class="string">        &#125; catch (e) &#123;</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;proxyObjs[i]&#125;</span> = &#123;&#125;;</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;proxyObjs[i]&#125;</span> = new Proxy(<span class="subst">$&#123;proxyObjs[i]&#125;</span>, <span class="subst">$&#123;handler&#125;</span>);</span></span><br><span class="line"><span class="string">        &#125;`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span> = <span class="variable language_">global</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="variable language_">global</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="title class_">Buffer</span>;</span><br><span class="line"></span><br><span class="line">proxyObjs = [<span class="string">&#x27;window&#x27;</span>, <span class="string">&#x27;document&#x27;</span>, <span class="string">&#x27;location&#x27;</span>, <span class="string">&#x27;navigator&#x27;</span>, <span class="string">&#x27;history&#x27;</span>, <span class="string">&#x27;screen&#x27;</span>]</span><br><span class="line"><span class="title function_">getEnvs</span>(proxyObjs);</span><br><span class="line">requestAnimationFrame = <span class="keyword">function</span> <span class="title function_">requestAnimationFrame</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 分割线 #################################################################################</span></span><br><span class="line">_sdkGlueVersionMap = &#123;</span><br><span class="line">    <span class="string">&quot;sdkGlueVersion&quot;</span>: <span class="string">&quot;1.0.0.55&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bdmsVersion&quot;</span>: <span class="string">&quot;1.0.1.7&quot;</span>,</span><br><span class="line">    <span class="string">&quot;captchaVersion&quot;</span>: <span class="string">&quot;4.0.2&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">XMLHttpRequest</span> = <span class="keyword">function</span> <span class="title function_">XMLHttpRequest</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line">fetch = <span class="keyword">function</span> <span class="title function_">fetch</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onwheelx</span> = &#123;</span><br><span class="line">    <span class="string">&quot;_Ax&quot;</span>: <span class="string">&quot;0X21&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">navigator.<span class="property">vendorSubs</span> = &#123;</span><br><span class="line">    <span class="string">&quot;ink&quot;</span>: <span class="number">1734165618552</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">innerWidth</span> = <span class="number">1011</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">innerHeight</span> = <span class="number">959</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">outerWidth</span> = <span class="number">1920</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">outerHeight</span> = <span class="number">1020</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">screenX</span> = -<span class="number">291</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">screenY</span> = -<span class="number">1080</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">pageYOffset</span> = <span class="number">51</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">pageXOffset</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">screen = &#123;</span><br><span class="line">    <span class="attr">availHeight</span>: <span class="number">1040</span>,</span><br><span class="line">    <span class="attr">availLeft</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">availTop</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">availWidth</span>: <span class="number">1920</span>,</span><br><span class="line">    <span class="attr">colorDepth</span>: <span class="number">24</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">1080</span>,</span><br><span class="line">    <span class="attr">pixelWidth</span>:<span class="number">24</span>,</span><br><span class="line">&#125;</span><br><span class="line">navigator.<span class="property">platform</span> = <span class="string">&quot;Win32&quot;</span></span><br><span class="line">navigator.<span class="property">userAgent</span> = <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">referrer</span> =<span class="string">&#x27;https://www.toutiao.com/&#x27;</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&#x27;__ac_signature=_02B4Z6wo00f01W3Q6sQAAIDC0AAK3sXordlt8O5AADwtf8; gfkadpd=24,6457; ttcid=68bece3ff08a4cf98cfc9f0b60c9912716; x-web-secsdk-uid=be52d38f-1a5d-4b56-80d3-d8599adecf42; _ga=GA1.1.241337849.1734165486; s_v_web_id=verify_m4nxcsme_XjHXqzvc_dnFm_4lKs_8GO7_hr7PIRG4FwcP; tt_scid=SrPBXFP1aP94ytN4Xlr4qogO4YQ7lY8G465DusvN8idjEH0w1xir-uAz33YqVMfydbd7; local_city_cache=%E7%9F%B3%E5%AE%B6%E5%BA%84; csrftoken=09332eb9c5647c2fd30828b41b206d3a; _ga_QEHZPBE5HH=GS1.1.1734165485.1.0.1734165548.0.0.0&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="脚本2："><a href="#脚本2：" class="headerlink" title="脚本2："></a>脚本2：</h1><p>引入了一个显示框架，中间部分是补的环境</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dy_env.js</span></span><br><span class="line"><span class="keyword">debugger</span>;</span><br><span class="line">;</span><br><span class="line">catvm = &#123;&#125;</span><br><span class="line">catvm.<span class="property">memory</span> = &#123;<span class="attr">log</span>: []&#125;;</span><br><span class="line"></span><br><span class="line">catvm.<span class="property">proxy</span> = <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="comment">// Proxy 可以多层代理，即 a = new proxy(a); a = new proxy(a);第二次代理</span></span><br><span class="line">    <span class="comment">// 后代理的检测不到先代理的</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">target, property, value</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">table</span>([&#123;<span class="string">&quot;类型&quot;</span>:<span class="string">&quot;set--&gt;&quot;</span>,<span class="string">&quot;调用者&quot;</span>:target,<span class="string">&quot;调用属性&quot;</span>:property,<span class="string">&quot;设置值&quot;</span>:value&#125;]);</span><br><span class="line">            catvm.<span class="property">memory</span>.<span class="property">log</span>.<span class="title function_">push</span>(&#123;<span class="string">&quot;类型&quot;</span>:<span class="string">&quot;set--&gt;&quot;</span>,<span class="string">&quot;调用者&quot;</span>:target,<span class="string">&quot;调用属性&quot;</span>:property,<span class="string">&quot;设置值&quot;</span>:value&#125;);</span><br><span class="line">            <span class="comment">// console.log(&quot;set&quot;, target, property, value);</span></span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(...<span class="variable language_">arguments</span>); <span class="comment">//这是一种反射语句，这种不会产生死循环问题</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">get</span>(<span class="params">target, property, receiver</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">table</span>([&#123;<span class="string">&quot;类型&quot;</span>:<span class="string">&quot;get&lt;--&quot;</span>,<span class="string">&quot;调用者&quot;</span>:target,<span class="string">&quot;调用属性&quot;</span>:property,<span class="string">&quot;获取值&quot;</span>:target[property]&#125;]);</span><br><span class="line">            catvm.<span class="property">memory</span>.<span class="property">log</span>.<span class="title function_">push</span>(&#123;<span class="string">&quot;类型&quot;</span>:<span class="string">&quot;get&lt;--&quot;</span>,<span class="string">&quot;调用者&quot;</span>:target,<span class="string">&quot;调用属性&quot;</span>:property,<span class="string">&quot;获取值&quot;</span>:target[property]&#125;);</span><br><span class="line">            <span class="comment">// console.log(&quot;get&quot;, target, property, target[property]);</span></span><br><span class="line">            <span class="keyword">return</span> target[property];  <span class="comment">// target中访问属性不会再被proxy拦截，所以不会死循环</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下开始补环境###############################################</span></span><br><span class="line"><span class="variable language_">window</span> = <span class="variable language_">global</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="variable language_">global</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="title class_">Buffer</span>;</span><br><span class="line"></span><br><span class="line">requestAnimationFrame = <span class="keyword">function</span> <span class="title function_">requestAnimationFrame</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line">_sdkGlueVersionMap = &#123;</span><br><span class="line">    <span class="string">&quot;sdkGlueVersion&quot;</span>: <span class="string">&quot;1.0.0.55&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bdmsVersion&quot;</span>: <span class="string">&quot;1.0.1.7&quot;</span>,</span><br><span class="line">    <span class="string">&quot;captchaVersion&quot;</span>: <span class="string">&quot;4.0.2&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">XMLHttpRequest</span> = <span class="keyword">function</span> <span class="title function_">XMLHttpRequest</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line">onwheelx = &#123;</span><br><span class="line">    <span class="string">&quot;_Ax&quot;</span>: <span class="string">&quot;0X21&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">fetch = <span class="keyword">function</span> <span class="title function_">fetch</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">innerWidth</span> = <span class="number">1011</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">innerHeight</span> = <span class="number">959</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">outerWidth</span> = <span class="number">1920</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">outerHeight</span> = <span class="number">1020</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">screenX</span> = -<span class="number">291</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">screenY</span> = -<span class="number">1080</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">pageYOffset</span> = <span class="number">51</span></span><br><span class="line"></span><br><span class="line">screen = &#123;</span><br><span class="line">    <span class="attr">availHeight</span>: <span class="number">1040</span>,</span><br><span class="line">    <span class="attr">availLeft</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">availTop</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">availWidth</span>: <span class="number">1920</span>,</span><br><span class="line">    <span class="attr">colorDepth</span>: <span class="number">24</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">1080</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">navigator = <span class="keyword">class</span> <span class="title class_">navigator</span>&#123;&#125;</span><br><span class="line">navigator.<span class="property">platform</span> = <span class="string">&#x27;Win32&#x27;</span></span><br><span class="line">navigator.<span class="property">userAgent</span> = <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line"><span class="variable language_">document</span> = <span class="keyword">class</span> <span class="title class_">document</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示调用#########################</span></span><br><span class="line"><span class="variable language_">window</span> = catvm.<span class="title function_">proxy</span>(<span class="variable language_">window</span>)</span><br><span class="line">navigator = catvm.<span class="title function_">proxy</span>(navigator)</span><br><span class="line"><span class="variable language_">document</span> = catvm.<span class="title function_">proxy</span>(<span class="variable language_">document</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>关于</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>link</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>电影</title>
      <link href="/movies/index.html"/>
      <url>/movies/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>音乐</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
